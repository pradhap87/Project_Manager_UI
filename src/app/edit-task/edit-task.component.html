<div class="row">
  <h1 class="page-header">Edit Task</h1>

</div>
<div class="row">
  <div class="col-lg-8" *ngIf="jsonData">
    <form name="AddTask" id="taskForm" novalidate>
      <div class='table-responsive' ng-app="">
        <table class="table table-bordered">
          <tr>
            <th>Project</th>
            <td>              
              <select disabled="disabled" [(ngModel)]="jsonData.Project_ID" name="Manager" class="form-control" required>
                <option *ngFor="let item of projectData" [ngValue]="item.Project_ID">{{item.Project1}} </option>
              </select>

            </td>
          </tr>
          <tr>
            <th rowspan="2">Task</th>
            <td>
              <input type="text" [(ngModel)]="jsonData.Task1" class="form-control" name="taskDescription" required
                placeholder="Task Description">
            </td>
          </tr>
          <tr>
            <td>
          <tr>
            <td>Start date</td>
            <td>End date</td>

          </tr>
          <tr>
            <td>
              <input type="datetime-local" [(ngModel)]="jsonData.Start_Date" class="form-control" name="Start_Date" required>
            </td>
            <td>
              <input type="datetime-local" [(ngModel)]="jsonData.End_Date" class="form-control" name="End_Date" required>        
            </td>           
          </tr>

          </td>
          </tr>
          <tr>
            <td>Parent Task</td>
            <td>
              <select disabled="disabled" [(ngModel)]="jsonData.Parent__ID" name="ParentTask" class="form-control" required>
                <option *ngFor="let item of parentTaskData" [ngValue]="item.Parent_ID">{{item.Parent_Task}} </option>
              </select>
            </td>
          </tr>
          <tr>
            <th>Priority</th>
            <td item-width="100%">
          <tr>
            <td>0</td>
            <td>30</td>
          </tr>
          <tr>
            <td>
              <input id="Priority" type="range" min="0" max="30" [(ngModel)]="jsonData.Priority" class="form-control"
                name="Priority" required>
            </td>
          </tr>

          </td>
          </tr>
          <tr *ngIf="!responseData === true;">
            <td *ngIf="jsonData.Start_Date < jsonData.End_Date" colspan="2" class="text-center">              
              <button id="btnAddTask" type="submit" (click)='UpdateTask(jsonData)'
                class="btn btn-default">Update Task</button> | <button id="btnReset" type="submit" class="btn btn-default"
                [routerLink]="['/tasks']">Cancel</button></td>
                <td *ngIf="jsonData.Start_Date > jsonData.End_Date" colspan="2" class="text-center">              
                    <button id="btnAddTask" disabled="disabled" type="submit" (click)='UpdateTask(jsonData)'
                      class="btn btn-default">Update Task</button> | <button id="btnReset" type="submit" class="btn btn-default"
                      [routerLink]="['/tasks']">Cancel</button></td>
          </tr>
          <tr *ngIf="responseData === true;">
            <td colspan="2" class="text-center">
              <button id="btnReset" type="submit" class="btn btn-default" [routerLink]="['/tasks']">Back to Tasks</button></td>
          </tr>
        </table>
      </div>
    </form>
    <div *ngIf="responseData === true;">
      <div class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Task updated
        successfully !!!
      </div>
    </div>
    <div *ngIf="validation === false;">
      <div class="alert alert-danger alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> All fields are mandatory
      </div>
    </div>

  </div>
</div>

<div class="row" *ngIf="!jsonData">
  <div class="alert alert-info alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Please wait Loading the Task
    Data
  </div>
  <div class="alert alert-info alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> If it's taking long time
    then there is no Tasks Avalable in the system.
  </div>
</div>
<div *ngIf="jsonData">
<div *ngIf="jsonData.Start_Date > jsonData.End_Date">
    <div class="alert alert-danger alert-dismissable">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> End Date must be greater than or equal to Start Date
    </div>
  </div>
</div>